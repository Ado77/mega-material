import{L as t,d as i,c as e,h as s,_ as a,p as o,a as r}from"./common.js";let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}}),i=t=>{};window.addEventListener("testPassive",i,t),window.removeEventListener("testPassive",i,!1)}catch(t){}const h=!!n&&{passive:!0},c=["touchstart","pointerdown","mousedown","keydown"],d=["touchend","pointerup","mouseup","contextmenu"];let l=[],p=class extends t{constructor(){super(),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.t=!1,this.i=0,this.o=0,this.h="0",this.l={width:0,height:0},this.p=0,this.m=0,this.v=0,this.g={left:0,top:0},this.u=this._(),this.k=()=>{this.t=!0,this.A()},this.F=t=>this.M(t),this.P=()=>this.B(),this.C=()=>this.q(),this.D=()=>this.R(),this.H=()=>this.T()}connectedCallback(){super.connectedCallback(),this.$(!0),requestAnimationFrame(()=>{this.unbounded&&this.L()})}disconnectedCallback(){super.disconnectedCallback(),this.U(),this.X()}$(t){t&&(c.forEach(t=>{this.addEventListener(t,this.F,h)}),this.unbounded&&window.addEventListener("resize",this.H,h)),this.addEventListener("focus",this.C),this.addEventListener("blur",this.D)}M(t){if(this.disabled)return;const i=this.u;if(i.isActivated)return;const e=this.j;e&&void 0!==t&&e.type!==t.type||(i.isActivated=!0,i.isProgrammatic=void 0===t,i.activationEvent=t,i.wasActivatedByPointer=!i.isProgrammatic&&void 0!==t&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type),void 0!==t&&l.length>0&&l.some(t=>!1)?this.I():(void 0!==t&&(l.push(t.target),this.S(t)),i.wasElementMadeActive=this.V(t),i.wasElementMadeActive&&this.O(),requestAnimationFrame(()=>{l=[],i.wasElementMadeActive||void 0===t||" "!==t.key&&32!==t.keyCode||(i.wasElementMadeActive=this.V(t),i.wasElementMadeActive&&this.O()),i.wasElementMadeActive||(this.u=this._())})))}S(t){"keydown"===t.type?this.addEventListener("keyup",this.P):d.forEach(t=>{document.addEventListener(t,this.P)})}U(){c.forEach(t=>{this.removeEventListener(t,this.F)}),this.removeEventListener("focus",this.C),this.removeEventListener("blur",this.D),this.unbounded&&window.removeEventListener("resize",this.H)}X(){this.removeEventListener("keyup",this.P),d.forEach(t=>{document.removeEventListener(t,this.P)})}V(t){return void 0===t||"keydown"!==t.type||(":active",(this.matches||this.webkitMatchesSelector).call(this,":active"))}O(){this.L();let t="",i="";if(!this.unbounded){const{startPoint:e,endPoint:s}=this.G();t=`${e.x}px, ${e.y}px`,i=`${s.x}px, ${s.y}px`}this.J("--mega-ripple-fg-translate-start",t),this.J("--mega-ripple-fg-translate-end",i),clearTimeout(this.i),clearTimeout(this.o),this.K(),this.N("foreground-deactivation"),this.getBoundingClientRect(),this.W("foreground-activation"),this.i=window.setTimeout(()=>this.k(),225)}G(){const{activationEvent:t,wasActivatedByPointer:i}=this.u;let e;return e=i?function(t,i,e){if(!t)return{x:0,y:0};const{x:s,y:a}=i,o=s+e.left,r=a+e.top;let n,h;if("touchstart"===t.type){const i=t;n=i.changedTouches[0].pageX-o,h=i.changedTouches[0].pageY-r}else{const i=t;n=i.pageX-o,h=i.pageY-r}return{x:n,y:h}}(t,{x:window.pageXOffset,y:window.pageYOffset},this.getBoundingClientRect()):{x:this.l.width/2,y:this.l.height/2},e={x:e.x-this.p/2,y:e.y-this.p/2},{startPoint:e,endPoint:{x:this.l.width/2-this.p/2,y:this.l.height/2-this.p/2}}}A(){const{hasDeactivationUXRun:t,isActivated:i}=this.u;(t||!i)&&this.t&&(this.K(),this.W("foreground-deactivation"),this.o=window.setTimeout(()=>this.N("foreground-deactivation"),150))}K(){this.N("foreground-activation"),this.t=!1,this.getBoundingClientRect()}I(){this.j=this.u.activationEvent,this.u=this._(),setTimeout(()=>this.j=void 0,300)}B(){const t=this.u;if(!t.isActivated)return;const i={...t};t.isProgrammatic?(requestAnimationFrame(()=>this.Y(i)),this.I()):(this.X(),requestAnimationFrame(()=>{this.u.hasDeactivationUXRun=!0,this.Y(i),this.I()}))}Y({wasActivatedByPointer:t,wasElementMadeActive:i}){(t||i)&&this.A()}L(){this.l=this.getBoundingClientRect();const t=Math.max(this.l.height,this.l.width);this.v=this.unbounded?t:(()=>Math.sqrt(Math.pow(this.l.width,2)+Math.pow(this.l.height,2))+10)(),this.p=Math.floor(.6*t),this.h=""+this.v/this.p,this.Z()}Z(){this.J("--mega-ripple-fg-size",this.p+"px"),this.J("--mega-ripple-fg-scale",this.h),this.unbounded&&(this.g={left:Math.round(this.l.width/2-this.p/2),top:Math.round(this.l.height/2-this.p/2)},this.J("--mega-ripple-left",this.g.left+"px"),this.J("--mega-ripple-top",this.g.top+"px"))}W(t){this.setAttribute(t,"")}N(t){this.removeAttribute(t)}T(){this.m&&cancelAnimationFrame(this.m),this.m=requestAnimationFrame(()=>{this.L(),this.m=0})}q(){requestAnimationFrame(()=>this.W("background-focused"))}R(){requestAnimationFrame(()=>this.N("background-focused"))}J(t,i){this.style.setProperty(t,i)}_(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}}static get styles(){return[i,e`@keyframes fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mega-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mega-ripple-fg-translate-end,0)) scale(var(--mega-ripple-fg-scale,1))}}@keyframes fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mega-ripple-fg-opacity,0)}}@keyframes fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mega-ripple-fg-opacity,0)}to{opacity:0}}`,e`:host{--mega-ripple-fg-size:0;--mega-ripple-left:0;--mega-ripple-top:0;--mega-ripple-fg-scale:1;--mega-ripple-fg-translate-end:0;--mega-ripple-fg-translate-start:0;--mega-ripple-fg-opacity:0.12;-webkit-tap-highlight-color:transparent;will-change:transform,opacity;position:relative;outline:0;overflow:hidden;box-sizing:border-box;display:inline-block;contain:content;user-select:none;width:100%;height:100%}div::after,div::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:"";background-color:var(--mega-ripple-bg-color,#000);top:-50%;left:-50%;width:200%;height:200%}div::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;transform:scale(var(--mega-ripple-fg-scale,1))}div::after{top:0;left:0;transform:scale(0);transform-origin:center center;transition:opacity 150ms linear;width:var(--mega-ripple-fg-size,100%);height:var(--mega-ripple-fg-size,100%)}:host([foreground-activation]) div::after{animation:fg-radius-in 225ms forwards,fg-opacity-in 75ms forwards}:host([foreground-deactivation]) div::after{animation:fg-opacity-out 150ms;transform:translate(var(--mega-ripple-fg-translate-end,0)) scale(var(--mega-ripple-fg-scale,1))}:host(:hover) div::before{opacity:.04}:host(:active) div::after,:host(:focus) div::before,:host([background-focused]) div::before{transition-duration:75ms;opacity:.12}:host([unbounded]) div{overflow:visible}:host([unbounded]) div::after,:host([unbounded]) div::before{top:var(--mega-ripple-top,0);left:var(--mega-ripple-left,0);width:var(--mega-ripple-fg-size,100%);height:var(--mega-ripple-fg-size,100%)}:host([primary]) div::after,:host([primary]) div::before{background-color:var(--mega-theme-primary,#6200ee)}:host([accent]) div::after,:host([accent]) div::before{background-color:var(--mega-theme-accent,#018786)}:host([activated]) div::after,:host([activated]) div::before{background-color:var(--mega-theme-primary,#6200ee);opacity:.12}`]}render(){return s`<div><slot></slot></div>`}};a([o({type:Boolean,reflect:!0})],p.prototype,"primary",void 0),a([o({type:Boolean,reflect:!0})],p.prototype,"accent",void 0),a([o({type:Boolean,reflect:!0})],p.prototype,"unbounded",void 0),a([o({type:Boolean,reflect:!0})],p.prototype,"disabled",void 0),p=a([r("mega-ripple")],p);export{p as R,h as p};
